<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

<title>autocomplete</title>

<style>
.combobox [role=listbox].hidden {display: none};
[role=listbox] {list-style-type: none;}
[role=listbox] > [aria-selected='true']::before {content: ">>";}
[role=listbox] > .focused {border: 1px dotted;}
</style>

<script src="autocomplete.class.js"></script>
<script src="combobox.class.js"></script>

</head>
<body>
<h1>Test</h1>

<p><label>Multiselect
<input type="checkbox" id="multiselect">
</label></p>

<div class="autocomplete" id="myAutocomplete">
<div class="combobox" id="myCombobox">
<label>choose:
<input type="text">
</label>

<ul class="suggestions"></ul>
</div><!-- .combobox -->

<div class="message" aria-live="polite">
</div>
</div><!-- .autocomplete -->

<script>
let multiselect = document.querySelector ("#multiselect");
let autocomplete = setupAutocomplete ();

autocomplete.container.addEventListener ("done", () => autocomplete.message (`You chose ${autocomplete.valueOf()}.`));
multiselect.addEventListener ("click", e => {
if (e.target.checked) {
autocomplete.combobox.container.classList.add("multiselect");
} else {
autocomplete.combobox.container.classList.remove("multiselect");
} // if
}); // handler


function setupAutocomplete () {
return new AutocompleteBehavior (document.querySelector ("#myAutocomplete"),
["chocolate", "vanilla", "strawberry", "coconut"]);
} // setupAutocomplete
</script>

</body>
</html>
